<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Guide</title>
    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- style -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- headers -->
    <header class="text-gray-600 body-font">
        <div class="container mx-auto flex flex-wrap p-4 flex-col md:flex-row items-center">
            <a class="flex title-font font-medium items-center text-gray-900 mb-4 md:mb-0" href="../index.html">
                <span class="ml-3 text-xl">MELODY</span>
            </a>
            <nav class="md:ml-auto flex flex-wrap items-center text-base justify-center">
                <a class="mr-5 hover:text-gray-900" href="getting_started.html">Getting Started</a>
                <!-- <a class="mr-5 hover:text-gray-900" href="examples.html">Examples</a> -->
                <a class="mr-5 hover:text-gray-900" href="user_guide.html">User Guide</a>
                <a class="mr-5 hover:text-gray-900" href="documentation.html">Documentation</a>
            </nav>
        </div>
    </header>

    <div class="flex flex-wrap">
        <div class="container">
            <div class="row">
                <div class="col-3">
                    <!-- sidebar -->
                    <div class="flex-shrink-0 p-3 sticky-top" style="width: 280px;">
                        <ul class="list-unstyled ps-0">
                            <li class="mb-1">
                                <button class="btn btn-toggle align-items-center rounded collapsed">
                                    <a class="link-dark rounded" href="#auth">Authenticate</a>
                                </button>
                            </li>
                            <li class="mb-1">
                                <button class="btn btn-toggle align-items-center rounded collapsed">
                                    <a class="link-dark rounded" href="#welcome">Welcome Page</a>
                                </button>
                            </li>
                            <li class="mb-1">
                                <button class="btn btn-toggle align-items-center rounded collapsed">
                                    <a class="link-dark rounded" href="#create_story">Create a new story</a>
                                </button>
                                <!-- <div class="collapse show" id="setup-collapse">
                                    <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                        <li><a href="#template" class="link-dark rounded">Templates</a></li>
                                        <li><a href="#section" class="link-dark rounded">Section</a></li>
                                        <li><a href="#title" class="link-dark rounded">Title</a></li>
                                        <li><a href="#endpoint" class="link-dark rounded">SPARQL endpoint</a></li>
                                    </ul>
                                </div> -->
                            </li>
                            <li class="mb-1">
                                <button class="btn btn-toggle align-items-center rounded collapsed"
                                    data-bs-toggle="collapse" data-bs-target="#statistics-collapse"
                                    aria-expanded="false">
                                    <a class="link-dark rounded" href="#templates">Templates</a>
                                </button>
                                <div class="collapse show" id="statistics-collapse">
                                    <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                        <li><a href="#statistics_template" class="link-dark rounded">The statistics template</a></li>
                                        <!-- <li><a href="#chart" class="link-dark rounded">Charts</a></li>
                                        <li><a href="#query" class="link-dark rounded">SPARQL query</a></li> -->
                                    </ul>
                                </div>
                            </li>
                            <li class="mb-1">
                                <button class="btn btn-toggle align-items-center rounded collapsed">
                                    <a class="link-dark rounded" href="#publish">Publish and Export</a>
                                </button>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- main -->
                <div class="col-9">
                    <div class="flex flex-col w-full">
                        <h1 class="sm:text-3xl text-2xl font-medium title-font mb-4 text-gray-900">User Guide</h1>
                        <p class="mb-3">If you haven't installed the Dashboard yet, check out <a class="text-green-500"
                                href="getting_started.html">the instructions</a>. If you're ready instead, visit <a
                                class="text-green-500" href="http://127.0.0.1:5000/"
                                target="_blank">http://127.0.0.1:5000/</a>.</p>
                        <h2 id="auth" class="text-lg sm:text-xl text-gray-900 font-medium title-font mb-2">Authenticate
                        </h2>
                        <p>To use MELODY both locally and in a production environment,
                          your instance must be paired with a GitHub repository and an OAuth Application
                          (see <a class="text-green-500"
                                  href="https://docs.github.com/en/developers/apps/building-oauth-apps/creating-an-oauth-app">how to create an OAuth app</a>
                                  connected to your instance of MELODY and
                                  <a class="text-green-500"
                                  href="https://docs.github.com/en/organizations/restricting-access-to-your-organizations-data/approving-oauth-apps-for-your-organization">how to approve the app on your repository</a>).
                          </p>
                        <p>After creating the OAuth app, modify the file <b>conf.py</b> in the root directory to configure the login.</p>
                        <code>
                          <pre>clientID='OAUth client id'
clientSecret='OAUth client secret id'
owner='the owner of the repository'
repo_name='the repository name'
token='the bearer token of the admin of the repository'</pre>
                        </code>
                        <p>Collaborators of the repository can then sign in MELODY with their GitHub account.</p>
                        <h2 id="welcome" class="text-lg sm:text-xl text-gray-900 font-medium title-font mb-2">Welcome
                            Page
                        </h2>
                        <p class="mb-3">The welcome page gives you access to the most important
                            functionalities.</p>
                        <img src="img/home.png" alt="">
                        <p>The left sidebar includes some exemplar data stories, grouped by
                        <i>section</i>. From the top right menu you can access the documentation (this document), create a new data story, and sign in with your GitHub credentials.
                        </p>
                        <h2 id="create_story" class="text-lg sm:text-xl text-gray-900 font-medium title-font mb-2">Create a new story
                        </h2>
                        <p class="mb-3 ">To create a new story, click on <i>Create a story</i>, in the top right menu. An initial setup page will require you to input some information to prepare the canvas of your story. </p>
                        <!-- <h2 id="template" class="text-lg sm:text-xl text-gray-900 font-medium title-font mb-2">Templates
                        </h2> -->
                        <img src="img/setup1.png" alt="">
                        <p class="mb-3 ">Data stories are built on <b>templates</b>,
                          a set of layout instructions for paginating contents and setup their interactivity. The idea is to provide a design
                            that can be customised and adapted to different situations while maintaining a consistent style.
                              We plan to offer three different templates:</p>
                          <ol class="list-group-numbered pl-3">
                              <li><b>Statistics</b>: allows a user to display on a canvas a sequence of textual contents, charts,
                                  and data summaries.
                              </li>
                              <li><b>Map</b>: allows to create a geographical map. Data points can be filtered with user-defined filters, and explored via their metadata, statistics and other charts.</li>
                              <li><b>Timeline</b>: allows to manipulate time series into adaptive charts, by adding or removing filters that intervene on the chart visualization.</li>
                              <!--<li><b>Networks</b>:</li>-->
                          </ol>
                          <p>You can preview some features of templates and select your favourite from the dropdown.</p>
                        <p class="mb-3 " style="color: red;">Currently only the <b>Statistics</b> template is available.</p>
                        <!-- <ol class="list-group-numbered pl-3">
                            <li>In the first step, you select the type of template, section and title of the datastory
                                and specify the SPARQL endpoint.</li>
                            <li>The second step is a WYSIWYG form in the style of the chosen template, which you fill
                                with the desired information.</li>
                        </ol> -->
                        <!-- <h2 id="section" class="text-lg sm:text-xl text-gray-900 font-medium title-font mb-2">Section
                        </h2> -->
                        <p class="mb-3"><b>Sections</b> are thematic groups including one or more stories. Section names appear on the left sidebar of MELODY.
                          You can either create a new section by entering a new section title, or you can select one of the existing ones from the dropdown.</p>
                          <img src="img/setup2.png" alt="">
                        <!-- <h2 id="title" class="text-lg sm:text-xl text-gray-900 font-medium title-font mb-2">Title
                        </h2> -->
                        <p class="mb-3">The <b>title</b> of the data story doesn't need much explanation. It's the first
                            prominent communication tool in the narrative of the data story you're going to create.</p>
                        <!-- <h2 id="endpoint" class="text-lg sm:text-xl text-gray-900 font-medium title-font mb-2">SPARQL
                            Endpoint
                        </h2> -->
                        <p class="mb-3">Lastly, you must include the URL of an online <b>SPARQL endpoint</b> to retrieve
                            data and populate the charts. Check carefully that it's working.</p>
                        <img src="img/setup3.png" alt="">
                        <p class="mb-3">Once you submit your setup information, a link to your datastory will appear in the left sidebar under the name of the section you chose. You'll be redirected to a user-friendly interface based on the template you've chosen.
                          The new interface will alow you to write and run SPARQL queries and to populate the elements composing the canvas of your final data story.
                          The interface is WYSIWYG (What You See Is What You Get), meaning you will be able to immediately see results of your queries as charts, modify the order of contents (when applicable) and preview the final data story to be published.</p>

                        <h2 id="templates" class="text-lg sm:text-xl text-gray-900 font-medium title-font mb-2">
                            Templates
                        </h2>
                        <h3 class="text-lg sm:text-xl text-gray-900 font-medium title-font mb-2" id="statistics_template">The Statistics template</h3>
                        <p class="mb-3">The Statistics template is designed for a <i>classic</i> data story,
                            where you can combine textual information with statistical information such as counts and
                            charts to create a sequential narrative.</p>
                          <img src="img/story1.png" alt="">
                        <p>You can change the default <b>colors</b> of your story.
                          The new colors will be used in every chart and will create a duotone background effect
                          on the secondary menu.</p>
                        <p>Similarly, the <b>title</b>, the <b>subtitle</b>, the <b>introduction</b>, and the <b>curators</b> of the story (in the secondary menu) can be modified. The position of these elements in the canvas cannot be modified.</p>
                        <p>The optional elements of the page are: <b>textboxes</b>, <b>countings</b>, and <b>charts</b>. To add a new element use the respective buttons.
                          Each box can be moved up and down or removed.</p>
                          <img src="img/story2.png" alt="">
                        <h2 id="count" class="text-lg sm:text-xl text-gray-900 title-font mb-2">Counts
                        </h2>
                        <p class="mb-3">Counts are boxes including a counting that is the result of a SPARQL query and a label,
                          that can be manually associated. Countings can be used to give an overview of the dataset. A count requires you to fill in two text areas:</p>
                        <ul style="list-style: inside;" class="mb-3 pl-3">
                            <li>A SPARQL query that returns a number. The returned variable name MUST be named "count".
                            </li>
                            <li>A short label to be associated to the number in the box.</li>
                        </ul>
                        <p>For instance, a counting can report the number of instances of a certain type. The SPARQL query may look like follows:</p>
                        <code>SELECT (COUNT(?s) AS ?count) WHERE {?s ?p &lt;https://w3id.org/musow/vocab/repository&gt;.}</code>
                        <p>Once the query is included in the text area, it automatically runs against the endpoint selected in the preliminary setup, and the resulting box appears on top.</p>
                        <img src="img/count.png" alt="">
                        <h2 id="chart" class="text-lg sm:text-xl text-gray-900 title-font mb-2">Charts
                        </h2>
                        <p class="mb-3">Currently, in the statistics template
                          you can choose between three types of charts: <b>Bar chart</b>, <b>Line chart</b>, and <b>Doughnut chart</b>.
                        For each chart, the following information must be provided:</p>
                        <ol class="list-group-numbered mb-3 pl-3">
                            <li>the type of chart (required), to be selected from a dropdown
                            </li>
                            <li>the SPARQL query (required), to be added in a text area</li>
                            <li>the chart Title (required)</li>
                            <li>one or more operations (optional), to aggregate data returned by the query.</li>
                        </ol>

                        <p class="mb-3">Overall, a SPARQL query to build a chart can be of two types:</p>
                        <ul style="list-style: inside;" class="mb-3 pl-3">
                            <li><b>Aggregating</b>: the query retrieves aggregated data that are
                                automatically post-processed to be displayed in a chart.
                                The query returns two variables, respectively called <b>?x</b> and <b>?y</b> which are respectively a categorical/numerical value (x), and a numerical value (y).
                            </li>
                            <li><b>Non-Aggregating</b>: the query retrieves non-aggregated data, which are not immediately suitable for
                                charting, hence data need some post-processing operations, provided by the interface.
                                The query returns one variable called <b>?label</b>, whose values are aggregated with the <b>count</b> operator available under the chart.</li>
                        </ul>
                        <p class="mb-3">The returned variables and values of the query depend on the type of chart
                            chosen. In addition, depending on the optional operations chosen,
                            there are also requirements for the variable names.</p>
                        <p>For instance, the following aggregating query:</p>
                        <code><pre>SELECT ?x (COUNT(?content) AS ?y)
WHERE {
    ?content &lt;https://schema.org/additionalType&gt; ?type.
    ?type rdfs:label ?x .
 } GROUP BY ?x</pre> </code>
                        <p>returns two variables (x and y) that are ready to fit in the requirements of the chart.</p>
                        <img src="img/barchart1.png" alt="">

                        <p class="mb-3">In case of a <b>non-aggregating</b> query, the query must return one variable called <b>?label</b>, and
                          the operation <b>count</b> must be selected in order to plot results. For instance:
                        </p>
                            <code><pre>
SELECT ?label
WHERE {
  ?content &lt;https://schema.org/additionalType&gt; ?type .
  ?type rdfs:label ?label .
}
                            </pre> </code>
                        <p>returns the same values as the aggregating query above, provided the checbox <b>Count</b> is selected.</p>
                        <img src="img/donut.png" alt="">

                        <h2 id="publish" class="text-lg sm:text-xl text-gray-900 font-medium title-font mb-2">
                            Publish and Export
                        </h2>
                        <p class="mb-3">Once the form is submitted the form, you are redirected to the data story, also
                            available from the sidebar on the left, where to find the link to modify the story in the future.
                        </p>
                        <p>The final data story presents elements of the canvas
                          in the sequence selected by the designer and presents a few metadata in the secondary menu.
                          The story can be exported as a PDF document and as a static HTML document, ready to be published in other platforms.</p>
                        <img src="img/final1.png" alt="">
                        <p>
                            Similarly, each chart can be saved as a .png image, or
                            exported as an embeddable HTML code snippet.</p>
                        <img src="img/final2.png" alt="">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- footer -->
    <footer class="text-gray-600 body-font mt-6">
        <div
            class="container px-5 py-24 mx-auto flex md:items-center lg:items-start md:flex-row md:flex-nowrap flex-wrap flex-col">
            <div class="w-64 flex-shrink-0 md:mx-0 mx-auto md:text-left">
                <p class="mt-2 text-sm text-gray-500">MELODY is part of</p>
                <a href="https://polifonia-project.eu/" target="_blank">
                    <img src="../static/img/logopolifonia.svg" style="background-color: darkslategray;">
                </a>
                <p class="mt-2 text-sm text-gray-500">Polifonia has received funding from the European Union’s Horizon
                    2020 research
                    and innovation programme under grant agreement N. 101004746.</p>
            </div>
            <div class="flex-grow flex flex-wrap md:pl-20 -mb-10 md:mt-0 mt-10 md:text-left text-center">
                <div class="lg:w-1/2 md:w-1/2 w-full px-4">
                    <h2 class="title-font font-medium text-gray-900 tracking-widest text-sm mb-3">MELODY</h2>
                    <nav class="list-none mb-10">
                        <li>
                            <a class="text-gray-600 hover:text-pink-800"
                                href="https://github.com/polifonia-project/dashboard" target="_blank">Source code</a>
                        </li>
                        <li>
                            <a class="text-gray-600 hover:text-pink-800" href="https://polifonia-project.eu/"
                                target="_blank">
                                Polifonia
                            </a>
                        </li>
                    </nav>
                </div>
                <div class="lg:w-1/2 md:w-1/2 w-full px-4">
                    <h2 class="title-font font-medium text-gray-900 tracking-widest text-sm mb-3">LINKS</h2>
                    <nav class="list-none mb-10">
                        <li>
                            <a class="text-gray-600 hover:text-pink-800" href="getting_started.html">Get
                                started</a>
                        </li>
                        <!-- <li>
                            <a class="text-gray-600 hover:text-pink-800" href="examples.html">Examples</a>
                        </li> -->
                        <li>
                            <a class="text-gray-600 hover:text-pink-800" href="user_guide.html">User
                                Guide</a>
                        </li>
                        <li>
                            <a class="text-gray-600 hover:text-pink-800" href="documentation.html">Documentation</a>
                        </li>
                    </nav>
                </div>
                <!-- <div class="lg:w-1/4 md:w-1/2 w-full px-4">
                    <h2 class="title-font font-medium text-gray-900 tracking-widest text-sm mb-3">CATEGORIES</h2>
                    <nav class="list-none mb-10">
                        <li>
                            <a class="text-gray-600 hover:text-gray-800">First Link</a>
                        </li>
                        <li>
                            <a class="text-gray-600 hover:text-gray-800">Second Link</a>
                        </li>
                        <li>
                            <a class="text-gray-600 hover:text-gray-800">Third Link</a>
                        </li>
                        <li>
                            <a class="text-gray-600 hover:text-gray-800">Fourth Link</a>
                        </li>
                    </nav>
                </div> -->
                <!-- <div class="lg:w-1/4 md:w-1/2 w-full px-4">
                    <h2 class="title-font font-medium text-gray-900 tracking-widest text-sm mb-3">CATEGORIES</h2>
                    <nav class="list-none mb-10">
                        <li>
                            <a class="text-gray-600 hover:text-gray-800">First Link</a>
                        </li>
                        <li>
                            <a class="text-gray-600 hover:text-gray-800">Second Link</a>
                        </li>
                        <li>
                            <a class="text-gray-600 hover:text-gray-800">Third Link</a>
                        </li>
                        <li>
                            <a class="text-gray-600 hover:text-gray-800">Fourth Link</a>
                        </li>
                    </nav>
                </div> -->
            </div>
        </div>
        <div class="bg-gray-100">
            <!-- <div class="container mx-auto py-4 px-5 flex flex-wrap flex-col sm:flex-row">
                <p class="text-gray-500 text-sm text-center sm:text-left">©
                    <script>document.write(new Date().getFullYear());</script>
                    Polifonia Dashboard —
                    <a href="https://twitter.com/knyttneve" rel="noopener noreferrer" class="text-gray-600 ml-1"
                        target="_blank">@giuliarenda</a>
                </p>
                <span class="inline-flex sm:ml-auto sm:mt-0 mt-2 justify-center sm:justify-start">
                    <a class="text-gray-500">
                        <svg fill="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            class="w-5 h-5" viewBox="0 0 24 24">
                            <path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"></path>
                        </svg>
                    </a>
                    <a class="ml-3 text-gray-500">
                        <svg fill="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            class="w-5 h-5" viewBox="0 0 24 24">
                            <path
                                d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z">
                            </path>
                        </svg>
                    </a>
                    <a class="ml-3 text-gray-500">
                        <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                            stroke-width="2" class="w-5 h-5" viewBox="0 0 24 24">
                            <rect width="20" height="20" x="2" y="2" rx="5" ry="5"></rect>
                            <path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37zm1.5-4.87h.01"></path>
                        </svg>
                    </a>
                    <a class="ml-3 text-gray-500">
                        <svg fill="currentColor" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                            stroke-width="0" class="w-5 h-5" viewBox="0 0 24 24">
                            <path stroke="none"
                                d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z">
                            </path>
                            <circle cx="4" cy="4" r="2" stroke="none"></circle>
                        </svg>
                    </a>
                </span>
            </div> -->
        </div>
    </footer>

    <!-- scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
</body>

</html>
